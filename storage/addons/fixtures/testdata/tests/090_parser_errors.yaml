- name: WHEN loader cannot parse input file parser MUST fail with error
  method: GET
  path: /gonkex/process
  request: |
     names: ["file1"]
     fs:
        file1: |
           collections: aaa
  response: 
    200: |-
       error: parse file for fixture "file1": yaml: unmarshal errors:
         line 1: cannot unmarshal !!str `aaa` into yaml.MapSlice

- name: WHEN loader find collection with wrong item inside (not an array) parser MUST fail with error
  method: GET
  path: /gonkex/process
  request: |
     names: ["file1"]
     fs:
        file1: |
           collections:
             table1: aaaa
  response: 
    200: |-
       error: parse file for fixture "file1": expected array at root level

- name: WHEN file consists unknown collection types parser MUST fail with error
  method: GET
  path: /gonkex/process
  request: |
     names: ["file1"]
     types: ["sets"]
     fs:
        file1: |
           sets:
              table1:
                - field1: "value1"
                  field2: 1
           wrongType:
              table1:
                - field1: "value2"
                  field2: 2
  response: 
    200: |-
       error: parse file for fixture "file1": unknown item type 'wrongType' found
